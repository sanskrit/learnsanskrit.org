{% extends 'texts/layout.html' %}

{% block title %}{{ readable_query }}{% endblock %}

{% block content %}
<h1 id="readable-query">{{ readable_query }}</h1>

<div id="segments">
{% for segment in segments %}
<section id="{{ segment.xmlid }}" class="segment">
    <a class="jump" href="#{{ segment.xmlid }}">#</a>
    <div class="primary">
    {{ segment.content|safe }}
    </div>

    <div class="translation">
    {% for child_text in corresp[segment.slug] %}
        {% for child in corresp[segment.slug][child_text] %}
            {{ child.content|safe }}
        {% endfor %}
    {% endfor %}
    </div>
</section>
{% endfor %}
</div>

{% macro page_link(q, id) %}
    {% if q %}
    <a id="{{ id }}" class="page-link" href="{{ url_for('.segment', slug=text.slug, query=q.query, related=related) }}">{{ q.readable }}</a>
    {% else %}
    <a id="{{ id }}" class="page-link" href="{{ url_for('.text', slug=text.slug) }}">(back to title page)</a>
    {% endif %}
{% endmacro %}

{{ page_link(prev, 'prev-link') }}
{{ page_link(next, 'next-link') }}

{% endblock %}
